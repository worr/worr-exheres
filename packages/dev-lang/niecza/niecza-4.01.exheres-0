# Copyright 2011 William Orr <will@worrbase.com>
# Distributed under the terms of the GNU General Public License v2

SUMMARY="A Perl 6 compiler targetting the CLR"
DESCRIPTION="
A Perl 6 compiler targetting the CLR with an experimental focus on optimizations
"
HOMEPAGE="https://github.com/sorear/niecza"
DOWNLOADS="https://github.com/downloads/sorear/niecza/niecza-4.01.zip"

LICENCES="Artistic"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS=""

DEPENDENCIES="
    build+run:
        dev-lang/mono[>=2.6.4]
"

BUGS_TO="will@worrbase.com"

src_unpack() {
    mkdir "${WORK}"
    [[ -n "${ARCHIVES}" ]] && unzip "${FETCHEDDIR}/${ARCHIVES}" -d "${WORK}"
}

src_install() {
    dodir "/usr/lib/${PN}"
    dodir "/usr/lib/${PN}/run"
    dodir "/usr/lib/${PN}/obj"
    dodir "/usr/lib/perl6"

    insinto "/usr/lib/${PN}"
    for lib in $(ls "${WORK}/run"); do
        dolib "${WORK}/run/${lib}"
    done
    for lib in $(ls "${WORK}/obj"); do
        dolib "${WORK}/obj/${lib}"
    done

    insinto "/usr/lib/perl6"
    for lib in $(ls "${WORK}/lib"); do
        dolib "${WORK}/lib/${lib}"
    done

    default
}
